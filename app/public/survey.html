<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <style>
        h3 {
            margin-top: 25px;
        }

        .btn {
            margin-top: 30px;
            margin-bottom: 20px;
        }
        #match-img{
            width: 250px;
            height: 300px;
            align-content: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center" style="margin-top: 50px">Questions About <span class="badge badge-secondary">You</span>
        </h1>
        <h3>Name (Required)</h3>
        <input type="text" class="form-control" id="name" required>
        <h3>Link to Photo Image (Required)</h3>
        <input type="text" class="form-control" id="photo" required>
        <hr>
        <h3>Question 1</h3>
        <h4>Do you like see movies?</h4>
        <select class="form-control" id="question1">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 2</h3>
        <h4>Do you like Music?</h4>
        <select class="form-control" id="question2">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 3</h3>
        <h4>Do you like Travel?</h4>
        <select class="form-control" id="question3">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 4</h3>
        <h4>Do you like Sports?</h4>
        <select class="form-control" id="question4">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 5</h3>
        <h4>Do you like the beach?</h4>
        <select class="form-control" id="question5">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 6</h3>
        <h4>Do you like Tacos?</h4>
        <select class="form-control" id="question6">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 7</h3>
        <h4>Do you like Adventure?</h4>
        <select class="form-control" id="question7">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 8</h3>
        <h4>Do you like do exercises?</h4>
        <select class="form-control" id="question8">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 9</h3>
        <h4>Do you like romanticism?</h4>
        <select class="form-control" id="question9">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <h3>Question 10</h3>
        <h4>Do you like Fashion?</h4>
        <select class="form-control" id="question10">
            <option selected disabled>Please select</option>
            <option>1 (Strongly Disagree) </option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
        </select>
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
            Submit
        </button>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friend List</a> | <a
                        href="https://github.com/reynaldodominguez/friendfinder">GitHub Repo</a>
            </div>
        </footer>
    </div>

    <div id="results-modal" class="modal fade" style="overflow: auto" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
</body>

</html>

<script type="text/javascript">
    $("#submit").on("click", function (event) {
        event.preventDefault();



        // Form validation
        function validateForm() {
            var valid = true;
            $(".form-control").each(function () {
                if ($(this).val() === "" || $(this).val() === null) {
                    valid = false;
                }


            });

            return valid;
        }


        if (validateForm()) {


            var userData = {
                name: $("#name").val().trim(),
                photo: $("#photo").val().trim(),
                scores: [
                    $("#question1").val().charAt(0),
                    $("#question2").val().charAt(0),
                    $("#question3").val().charAt(0),
                    $("#question4").val().charAt(0),
                    $("#question5").val().charAt(0),
                    $("#question6").val().charAt(0),
                    $("#question7").val().charAt(0),
                    $("#question8").val().charAt(0),
                    $("#question9").val().charAt(0),
                    $("#question10").val().charAt(0),
                ]
            }

            $.post("/api/friends", userData, function (data) {

                $("#match-name").html(data.matchName);
                $("#match-img").attr("src", data.matchImage);

                $("#results-modal").modal("toggle");
            });

            $(".form-control").each(function () {
                $(this).val("");
            });

        } else {
            alert("Please fill out all fields before submitting!");
        }


    });

</script>